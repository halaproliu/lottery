{"ast":null,"code":"var _jsxFileName = \"/Users/louisliu/code/lottery/client/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useRef, useEffect } from 'react'; // import '@/libs/canvas'\n\nimport music from '@/assets/music/music.mp3';\nimport './App.styl';\nimport { prizeList } from '@/constant';\nimport * as Lottery from '@/api/lottery';\nimport Stars from '@/libs/stars';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nlet stopAnimate = false;\n\nfunction App() {\n  _s();\n\n  let [rotated, setRotated] = useState(0);\n  let [musicStyle, setMusicStyle] = useState({});\n  const audioRef = useRef(null);\n  const canvasRef = useRef(null);\n\n  const animateFn = () => {\n    window.requestAnimationFrame(() => {\n      if (stopAnimate) return;\n      setMusicStyle({\n        transform: `rotate(${rotated % 360}deg)`\n      });\n      setRotated(++rotated);\n      animateFn();\n    });\n  };\n\n  const onMusicPlay = () => {\n    let audio = audioRef.current;\n\n    if (audio.paused) {\n      audio.play().then(_ => {\n        stopAnimate = false;\n        animateFn();\n      }).catch(e => {\n        console.log(e);\n      });\n    } else {\n      audio.pause();\n      stopAnimate = true;\n    }\n  };\n\n  const init = async () => {\n    const res = await Lottery.getUsers();\n    console.log(res);\n    let stars = new Stars(canvasRef.current);\n    stars.init();\n  };\n\n  useEffect(() => {\n    audioRef.current.play();\n    init();\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"lottery-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"canvas-box\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          id: \"canvas\",\n          ref: canvasRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lottery-music\",\n        children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n          ref: audioRef,\n          className: \"lottery-music__item\",\n          src: music\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lottery-music__box\",\n          style: musicStyle,\n          onClick: onMusicPlay,\n          children: \"Music\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lottery-prizeBar\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lottery-prizeBar__title\",\n          children: [\"\\u6B63\\u5728\\u62BD\\u53D6\", /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"lottery-prizeBar__label\",\n            children: \"5\\u7B49\\u5956\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"lottery-prizeBar__label\",\n            children: \"\\u51CC\\u7F8E\\u94A2\\u7B14\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), \"\\uFF0C\\u5269\\u4F59\", /*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"lottery-prizeBar__label\",\n            children: \"35\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this), \"\\u4E2A\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"lottery-prizeBar__list\",\n          children: prizeList.map((prize, index) => {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"lottery-prizeBar__item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lottery-prizeBar__img\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: prize.img,\n                  alt: prize.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 75,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"lottery-prizeBar__text\",\n                children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                  className: \"lottery-prizeBar__text-title\",\n                  children: [prize.type, \"\\u7B49\\u5956 \", prize.title]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 78,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"lottery-prizeBar__count\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"progress-bar progress-bar-danger progress-bar-striped active\",\n                      style: {\n                        width: '100%'\n                      }\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 81,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 80,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"lottery-prizeBar__count-left\",\n                    children: prize.count + '/' + prize.count\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 83,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 77,\n                columnNumber: 21\n              }, this)]\n            }, prize.type || index + Date.now(), true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lottery-menu\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"\\u8FDB\\u5165\\u62BD\\u5956\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lottery-none\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"\\u62BD\\u5956\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"\\u91CD\\u65B0\\u62BD\\u5956\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"\\u5BFC\\u51FA\\u62BD\\u5956\\u7ED3\\u679C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"\\u91CD\\u7F6E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"lottery-bubble__container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lottery-bubble animated\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(App, \"6+pZfLGNbyb/QFL/8/2FSF5zqE0=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/louisliu/code/lottery/client/src/App.js"],"names":["React","useState","useRef","useEffect","music","prizeList","Lottery","Stars","stopAnimate","App","rotated","setRotated","musicStyle","setMusicStyle","audioRef","canvasRef","animateFn","window","requestAnimationFrame","transform","onMusicPlay","audio","current","paused","play","then","_","catch","e","console","log","pause","init","res","getUsers","stars","map","prize","index","img","title","type","width","count","Date","now"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,SAAlC,QAAmD,OAAnD,C,CACA;;AACA,OAAOC,KAAP,MAAkB,0BAAlB;AACA,OAAO,YAAP;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,OAAO,KAAKC,OAAZ,MAAyB,eAAzB;AACA,OAAOC,KAAP,MAAkB,cAAlB;;;AAEA,IAAIC,WAAW,GAAG,KAAlB;;AACA,SAASC,GAAT,GAAe;AAAA;;AACb,MAAI,CAAEC,OAAF,EAAWC,UAAX,IAA0BV,QAAQ,CAAC,CAAD,CAAtC;AACA,MAAI,CAAEW,UAAF,EAAcC,aAAd,IAAgCZ,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAMa,QAAQ,GAAGZ,MAAM,CAAC,IAAD,CAAvB;AACA,QAAMa,SAAS,GAAGb,MAAM,CAAC,IAAD,CAAxB;;AACA,QAAMc,SAAS,GAAG,MAAM;AACpBC,IAAAA,MAAM,CAACC,qBAAP,CAA6B,MAAM;AACnC,UAAIV,WAAJ,EAAiB;AACjBK,MAAAA,aAAa,CAAC;AACZM,QAAAA,SAAS,EAAG,UAAST,OAAO,GAAG,GAAI;AADvB,OAAD,CAAb;AAGAC,MAAAA,UAAU,CAAC,EAAED,OAAH,CAAV;AACAM,MAAAA,SAAS;AACV,KAPC;AAQH,GATD;;AAUA,QAAMI,WAAW,GAAG,MAAM;AACxB,QAAIC,KAAK,GAAGP,QAAQ,CAACQ,OAArB;;AACA,QAAID,KAAK,CAACE,MAAV,EAAkB;AAChBF,MAAAA,KAAK,CAACG,IAAN,GAAaC,IAAb,CAAkBC,CAAC,IAAI;AACrBlB,QAAAA,WAAW,GAAG,KAAd;AACAQ,QAAAA,SAAS;AACV,OAHD,EAGGW,KAHH,CAGSC,CAAC,IAAI;AACZC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD,OALD;AAMD,KAPD,MAOO;AACLP,MAAAA,KAAK,CAACU,KAAN;AACAvB,MAAAA,WAAW,GAAG,IAAd;AACD;AACF,GAbD;;AAeA,QAAMwB,IAAI,GAAG,YAAY;AACvB,UAAMC,GAAG,GAAG,MAAM3B,OAAO,CAAC4B,QAAR,EAAlB;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAYG,GAAZ;AACA,QAAIE,KAAK,GAAG,IAAI5B,KAAJ,CAAUQ,SAAS,CAACO,OAApB,CAAZ;AACAa,IAAAA,KAAK,CAACH,IAAN;AACD,GALD;;AAOA7B,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,QAAQ,CAACQ,OAAT,CAAiBE,IAAjB;AACAQ,IAAAA,IAAI;AACL,GAHQ,CAAT;AAIA,sBACE;AAAA,2BACE;AAAK,MAAA,SAAS,EAAC,mBAAf;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA,+BACE;AAAQ,UAAA,EAAE,EAAC,QAAX;AAAoB,UAAA,GAAG,EAAEjB;AAAzB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAIE;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA,gCACE;AAAO,UAAA,GAAG,EAAED,QAAZ;AAAsB,UAAA,SAAS,EAAC,qBAAhC;AAAsD,UAAA,GAAG,EAAEV;AAA3D;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,SAAS,EAAC,oBAAf;AAAoC,UAAA,KAAK,EAAEQ,UAA3C;AAAuD,UAAA,OAAO,EAAEQ,WAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,eAQE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,yBAAf;AAAA,8DAEE;AAAO,YAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAO,YAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,qCAKE;AAAO,YAAA,SAAS,EAAC,yBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBALF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE;AAAI,UAAA,SAAS,EAAC,wBAAd;AAAA,oBAEIf,SAAS,CAAC+B,GAAV,CAAc,CAACC,KAAD,EAAQC,KAAR,KAAkB;AAC9B,gCACE;AAAI,cAAA,SAAS,EAAC,wBAAd;AAAA,sCACE;AAAK,gBAAA,SAAS,EAAC,uBAAf;AAAA,uCACE;AAAK,kBAAA,GAAG,EAAED,KAAK,CAACE,GAAhB;AAAqB,kBAAA,GAAG,EAAEF,KAAK,CAACG;AAAhC;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBADF,eAIE;AAAK,gBAAA,SAAS,EAAC,wBAAf;AAAA,wCACE;AAAI,kBAAA,SAAS,EAAC,8BAAd;AAAA,6BAA+CH,KAAK,CAACI,IAArD,mBAAgEJ,KAAK,CAACG,KAAtE;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAK,kBAAA,SAAS,EAAC,yBAAf;AAAA,0CACE;AAAK,oBAAA,SAAS,EAAC,UAAf;AAAA,2CACI;AAAK,sBAAA,SAAS,EAAC,8DAAf;AAA8E,sBAAA,KAAK,EAAE;AAACE,wBAAAA,KAAK,EAAE;AAAR;AAArF;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AAAK,oBAAA,SAAS,EAAC,8BAAf;AAAA,8BACKL,KAAK,CAACM,KAAN,GAAc,GAAd,GAAoBN,KAAK,CAACM;AAD/B;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF;AAAA,eAA4CN,KAAK,CAACI,IAAN,IAAcH,KAAK,GAAGM,IAAI,CAACC,GAAL,EAAlE;AAAA;AAAA;AAAA;AAAA,oBADF;AAkBD,WAnBD;AAFJ;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA,cARF,eAyCE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAK,UAAA,SAAS,EAAC,cAAf;AAAA,kCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cAzCF,eAkDE;AAAK,QAAA,SAAS,EAAC,2BAAf;AAAA,+BACE;AAAK,UAAA,SAAS,EAAC;AAAf;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cAlDF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF,mBADF;AA0DD;;GAnGQpC,G;;KAAAA,G;AAqGT,eAAeA,GAAf","sourcesContent":["import React, { useState, useRef, useEffect } from 'react'\n// import '@/libs/canvas'\nimport music from '@/assets/music/music.mp3'\nimport './App.styl';\nimport { prizeList } from '@/constant'\nimport * as Lottery from '@/api/lottery'\nimport Stars from '@/libs/stars'\n\nlet stopAnimate = false\nfunction App() {\n  let [ rotated, setRotated ] = useState(0)\n  let [ musicStyle, setMusicStyle ] = useState({})\n  const audioRef = useRef(null)\n  const canvasRef = useRef(null)\n  const animateFn = () => {\n      window.requestAnimationFrame(() => {\n      if (stopAnimate) return\n      setMusicStyle({\n        transform: `rotate(${rotated % 360}deg)`\n      })\n      setRotated(++rotated)\n      animateFn()\n    })\n  }\n  const onMusicPlay = () => {\n    let audio = audioRef.current\n    if (audio.paused) {\n      audio.play().then(_ => {\n        stopAnimate = false\n        animateFn()\n      }).catch(e => {\n        console.log(e)\n      })\n    } else {\n      audio.pause()\n      stopAnimate = true\n    }\n  }\n\n  const init = async () => {\n    const res = await Lottery.getUsers()\n    console.log(res)\n    let stars = new Stars(canvasRef.current)\n    stars.init()\n  }\n\n  useEffect(() => {\n    audioRef.current.play()\n    init()\n  })\n  return (\n    <>\n      <div className=\"lottery-container\">\n        <div className=\"canvas-box\">\n          <canvas id=\"canvas\" ref={canvasRef}></canvas>\n        </div>\n        <div className=\"lottery-music\">\n          <audio ref={audioRef} className=\"lottery-music__item\" src={music}></audio>\n          <div className=\"lottery-music__box\" style={musicStyle} onClick={onMusicPlay}>Music</div>\n        </div>\n        <div className=\"lottery-prizeBar\">\n          <div className=\"lottery-prizeBar__title\">\n            正在抽取\n            <label className=\"lottery-prizeBar__label\">5等奖</label>\n            <label className=\"lottery-prizeBar__label\">凌美钢笔</label>\n            ，剩余\n            <label className=\"lottery-prizeBar__label\">35</label>个\n          </div>\n          <ul className=\"lottery-prizeBar__list\">\n            {\n              prizeList.map((prize, index) => {\n                return (\n                  <li className=\"lottery-prizeBar__item\" key={prize.type || index + Date.now()}>\n                    <div className=\"lottery-prizeBar__img\">\n                      <img src={prize.img} alt={prize.title} />\n                    </div>\n                    <div className=\"lottery-prizeBar__text\">\n                      <h5 className=\"lottery-prizeBar__text-title\">{ prize.type }等奖 { prize.title }</h5>\n                      <div className=\"lottery-prizeBar__count\">\n                        <div className=\"progress\">\n                            <div className=\"progress-bar progress-bar-danger progress-bar-striped active\" style={{width: '100%' }}></div>\n                        </div>\n                        <div className=\"lottery-prizeBar__count-left\">\n                            {prize.count + '/' + prize.count}\n                        </div>\n                    </div>\n                    </div>\n                  </li>\n                )\n              })\n            }\n          </ul>\n        </div>\n        <div className=\"lottery-menu\">\n          <button>进入抽奖</button>\n          <div className=\"lottery-none\">\n            <button>抽奖</button>\n            <button>重新抽奖</button>\n            <button>导出抽奖结果</button>\n            <button>重置</button>\n          </div>\n        </div>\n        <div className=\"lottery-bubble__container\">\n          <div className=\"lottery-bubble animated\"></div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}